# This workflow will install Python dependencies, run tests and lint with a variety of Python versions
# For more information see: https://help.github.com/actions/language-and-framework-guides/using-python-with-github-actions

name: Python package

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.5]

    steps:
    - uses: actions/checkout@v2
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v2
      with:
        python-version: ${{ matrix.python-version }}
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install flake8 pytest
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    - name: Lint with flake8
      run: |
        # stop the build if there are Python syntax errors or undefined names
        flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
        # exit-zero treats all errors as warnings. The GitHub editor is 127 chars wide
        flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
    - name: Auto Sign In
      run: |
        chmod +x ./Spiders/baidutieba_signin.py
        python Spiders/baidutieba_signin.py BAIDUID=3A998D32FE9E9B32EB8677C4ED53C604:FG=1; SEENKW=%E5%8C%97%E4%BA%AC%E9%82%AE%E7%94%B5%E5%A4%A7%E5%AD%A6; IS_NEW_USER=43278e024a7fb177c309f12e; BAIDU_WISE_UID=wapp_1594128730895_730; CLIENTWIDTH=360; CLIENTHEIGHT=526; pb_prompt=1; SET_PB_IMAGE_WIDTH=272; ZD_ENTRY=sogou; USER_JUMP=-1; mo_originid=2; Hm_lvt_7d6994d7e4201dd18472dd1ef27e6217=1594134600; st_key_id=17; BDUSS=dHcmNNSn5Xejlua1M2dTZVYjdHMHU2bmV0UFdpfnNNeFZQV3B2UVhidldIU3hmRUFBQUFBJCQAAAAAAAAAAAEAAAAHEfl-zOzPwm1idQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANaQBF~WkARfSD; TIEBAUID=cb23caae1302f373384a5761; Hm_lpvt_7d6994d7e4201dd18472dd1ef27e6217=1594134965; TIEBA_USERTYPE=631700b01781e93987001306; STOKEN=96027375a8801a61e3ca2c7b6c971b8a332c69b0025ba13f03dc5806234efd9c; Hm_lvt_98b9d8c2fd6608d564bf2ac2ae642948=1594128734,1594134978; Hm_lpvt_98b9d8c2fd6608d564bf2ac2ae642948=1594135333; st_data=2f0eb70c239e3d9ff92ea0ed3f0dea493141d1181a662cee954b95034e484c8e22493c9cf37137cc488cd622e07930e3d558d81e8de7a8d5ae02b2cda661121f3e64482fabfc2640ea9b3854dd724b82b4c8798e90bfbc5af93161a585c1cb314fecde29bc8261708c151998308365e6d9e20083bab92c7067f020fdb0ad181e95aa60f769098fb7d151a02639634eeb; st_sign=5904d740
